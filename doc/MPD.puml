@startuml
title Modèle Physique de Données (MPD) - Serveur de Poker

hide circle
skinparam linetype ortho
skinparam table {
  BackgroundColor White
  BorderColor Black
}
skinparam arrow {
  Color Black
}

' --- Définition des Tables ---

entity "Joueurs" as T_JOUEURS {
  * **id_joueur** : INTEGER <<PK>> <<AI>>
  --
  * pseudo : VARCHAR(50) <<UNIQUE>>
  * mdp_hash : VARCHAR(255)
  * mail : VARCHAR(100) <<UNIQUE>>
  * credit : DECIMAL(10, 2)
  * date_creation : TIMESTAMP
  * age : INTEGER
}

entity "Tables" as T_TABLES {
  * **id_table** : INTEGER <<PK>> <<AI>>
  --
  * nb_sieges : INTEGER
  * blind_initial : DECIMAL(10, 2)
}

entity "Sieges" as T_SIEGES {
  * **id_siege** : INTEGER <<PK>> <<AI>>
  --
  * id_table : INTEGER <<FK>>
  * numero : INTEGER
  * occupe : BOOLEAN
  * id_joueur : INTEGER <<FK>> <<NULL>>
}

entity "Parties" as T_PARTIES {
  * **id_partie** : INTEGER <<PK>> <<AI>>
  --
  * id_table : INTEGER <<FK>>
  * date_debut : TIMESTAMP
  * date_fin : TIMESTAMP <<NULL>>
  * pot_total : DECIMAL(10, 2)
}

entity "Cartes_Communes" as T_CARTES_COMMUNES {
  * **id_carte_commune** : INTEGER <<PK>> <<AI>>
  --
  * id_partie : INTEGER <<FK>>
  * valeur : VARCHAR(10)
  * couleur : VARCHAR(10)
  * ordre : INTEGER
}

entity "Joueurs_Parties" as T_JOUEURS_PARTIES {
  * **id_joueur_partie** : INTEGER <<PK>> <<AI>>
  --
  * id_joueur : INTEGER <<FK>>
  * id_partie : INTEGER <<FK>>
  * id_siege : INTEGER <<FK>>
  * solde_partie : DECIMAL(10, 2)
  * statut : VARCHAR(20)
  * mise_tour : DECIMAL(10, 2)
  * main_joueur : VARCHAR(20)
}

entity "Transactions" as T_TRANSACTIONS {
  * **id_transaction** : INTEGER <<PK>> <<AI>>
  --
  * id_joueur : INTEGER <<FK>>
  * type_transaction : VARCHAR(50)
  * montant : DECIMAL(10, 2)
  * date_transaction : TIMESTAMP
}

entity "Administrateurs" as T_ADMINISTRATEURS {
  * **id_admin** : INTEGER <<PK>> <<AI>>
  --
  * nom_admin : VARCHAR(100)
  * mot_de_passe_hash : VARCHAR(255)
  * email : VARCHAR(100) <<UNIQUE>>
}

entity "Joueurs_Bannis" as T_JOUEURS_BANNIS {
  * **id_ban** : INTEGER <<PK>> <<AI>>
  --
  * id_admin : INTEGER <<FK>>
  * id_joueur : INTEGER <<FK>>
  * date_ban : TIMESTAMP
  * raison_ban : VARCHAR(255)
}

' --- Définition des Relations ---
T_ADMINISTRATEURS ||--o{ T_JOUEURS_BANNIS
T_JOUEURS ||--o{ T_TRANSACTIONS
T_JOUEURS ||--o{ T_JOUEURS_PARTIES
T_TABLES ||--o{ T_PARTIES
T_TABLES ||--o{ T_SIEGES
T_PARTIES ||--o{ T_JOUEURS_PARTIES
T_PARTIES ||--o{ T_CARTES_COMMUNES
T_SIEGES ||--o{ T_JOUEURS_PARTIES
T_JOUEURS_BANNIS }|--|| T_JOUEURS
@enduml